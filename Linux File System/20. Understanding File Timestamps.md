# Understanding Linux File Timestamps: The Complete Guide

Every Linux file carries three timestamps that track different types of activity. Understanding these is crucial for system administration, forensics, and troubleshooting.

## The Three Timestamps

**1. Access Time (atime)**
The last time the file was read or accessed. Updated when you view or open a file, even if you don't modify it.

**2. Modification Time (mtime)**
The last time the file's **content** was changed. Updated when you edit and save the file.

**3. Change Time (ctime)**
The last time the file's **metadata** was changed. Updated when you modify permissions, ownership, or other file attributes.

## How Linux Stores Time

Linux doesn't store timestamps as human-readable dates. Instead, it uses **Unix epoch time**: the number of seconds since midnight on January 1, 1970 UTC. The system converts this number to a readable date when displaying it to users.

## Viewing Timestamps with `stat`

The `stat` command shows comprehensive file information:

```bash
stat filename.txt
```

**Output includes:**
- Access time (atime)
- Modification time (mtime)  
- Change time (ctime)
- Birth time (file creation) - often not implemented on ext4 file systems

If you see a hyphen (`-`) for birth time, it means your file system hasn't implemented this feature yet.

## Viewing Timestamps with `ls`

Different `ls` options display different timestamps:

```bash
ls -l filename.txt         # Shows modification time (default)
ls -lt                     # Sorts by modification time
ls -lu                     # Shows and sorts by access time
ls -lc                     # Shows and sorts by change time
```

**For full timestamp precision (including year and seconds):**

```bash
ls -l --full-time /etc
```

This shows the complete timestamp instead of the abbreviated version that omits the year or seconds.

## The `touch` Command: Creating and Updating Files

The `touch` command has two primary functions:

**1. Create empty files:**
```bash
touch newfile.txt          # Creates file if it doesn't exist
```

**2. Update timestamps:**
```bash
touch existingfile.txt     # Updates all timestamps to current time
```

### File Naming Best Practice

Avoid spaces in filenames. Use underscores or hyphens instead:
- **Good:** `my_file.txt` or `my-file.txt`
- **Avoid:** `my file.txt`

If you must use spaces, enclose the filename in quotes:
```bash
touch "my file.txt"
```

## Modifying Specific Timestamps

**Update only access time:**
```bash
touch -a linux.txt
stat linux.txt             # Check the result
```

Note: This also updates ctime because you changed file metadata (the atime value).

**Update only modification time:**
```bash
touch -m linux.txt
stat linux.txt
```

Again, ctime updates too since you modified metadata.

**Set timestamp to a specific date and time:**

Using `-t` option (format: YYYYMMDDhhmm.ss):
```bash
touch -m -t 201812301430.45 linux.txt
```

This sets mtime to December 30, 2018, at 14:30:45.

Using `-d` option (more flexible format):
```bash
touch -d "2018-12-30 14:30:45" linux.txt
```

This changes both atime and mtime simultaneously.

**Important:** The `-t` and `-d` options accept different date formats, so check the man page if you encounter errors.

## Copying Timestamps from Another File

Set one file's timestamps to match another file's:

```bash
touch newfile.txt
touch -r ubuntu.txt linux.txt    # linux.txt gets ubuntu.txt's timestamps
stat linux.txt                    # Verify they match
```

The `-r` option uses the reference file's timestamps.

## The ctime Limitation

**You cannot directly set ctime to a specific value.** The system manages ctime automatically whenever metadata changes.

### Advanced Trick for Changing ctime

If you absolutely need to set ctime to a specific time, here's a workaround:

1. Set the system time to your desired ctime
2. Run `touch filename` (updates all timestamps to current system time)
3. Use `touch -a` and `touch -m` to restore the original atime and mtime
4. Reset the system time to the correct current time

The ctime will remain at your desired value. However, this requires root privileges and should be done carefully.

## Using the `date` Command

**Display current date and time:**
```bash
date                       # Local timezone
date -u                    # UTC (Coordinated Universal Time)
```

**Set system date and time (requires root):**
```bash
sudo date --set="2025-12-04 15:30:00"
```

Check `man date` for detailed format specifications.

## Practical Examples

**Create a file and check timestamps:**
```bash
touch linux.txt
stat linux.txt
```

**Update all timestamps to current time:**
```bash
touch linux.txt
stat linux.txt             # All three timestamps updated
```

**Set mtime to a past date:**
```bash
touch -m -t 201801151200.00 linux.txt
stat linux.txt
```

**View timestamps in long format:**
```bash
ls -l --full-time linux.txt
```

## Common Timestamp Scenarios

**When atime updates:**
- Reading a file with `cat`, `less`, or `more`
- Opening a file in a text editor (even without saving)

**When mtime updates:**
- Editing and saving file content
- Redirecting output to a file: `echo "text" > file.txt`

**When ctime updates:**
- Changing file permissions: `chmod 755 file.txt`
- Changing file ownership: `chown user:group file.txt`
- Updating atime or mtime (since these are metadata)

## Quick Reference

| Command | Purpose |
|---------|---------|
| `stat file` | Show all timestamps and file info |
| `touch file` | Create file or update all timestamps |
| `touch -a file` | Update access time only |
| `touch -m file` | Update modification time only |
| `touch -t YYYYMMDDhhmm.ss file` | Set specific timestamp |
| `touch -d "date string" file` | Set timestamp (flexible format) |
| `touch -r ref_file target_file` | Copy timestamps from ref_file |
| `ls -l --full-time` | Show complete timestamps |